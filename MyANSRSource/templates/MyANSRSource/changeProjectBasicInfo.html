{% extends 'changeProjectMaster.inc' %}

{% block pageTitle %}Change Project Basic Info{% endblock %}

{% block createProjectActive %}class="active"{% endblock %}
{% block CBIactiveClass %}active{% endblock %}
{% block childform %}{% block masterform %}
{% if form.errors %}
	<div class="alert alert-danger" role="alert">
        <ul>
		{% for field in form %} 
		{% if field.errors %}
        <li>{{ field.label }}: {{ field.errors|striptags }}</li>
		{% endif %}
		{% endfor %}
        </ul>        
	</div>
{% endif %}


<style type="text/css">
    
    .table-condensed>thead>tr>th, .table-condensed>tbody>tr>th, .table-condensed>tfoot>tr>th, .table-condensed>thead>tr>td, .table-condensed>tbody>tr>td, .table-condensed>tfoot>tr>td {
    padding: 5px 5px;
}
</style>


<div class="panel clearfix">
<div class="panel-body">
    <div class="row">
        <div class="col-sm-6 center-block">
            <div class="table-responsive col-lg-12">
            <h3><small><b>{{ projectName }}</b></small></h3>
            <h4><b><span class="label label-default">Total effort : {{ totalEffort }}</span></b></small></h4>
            <table class="table">
                <tr>
                    {% for hField in form.hidden_fields %}
                        <td>{{ hField }}</td>
                    {% endfor %}
                </tr>
                {% for field in form %}
                    <tr>
                        <td class="col-lg-6">
                                {% if field.label != 'BasicInfoId' %}
                                    {% if field.label != 'Remark' %}
                                    {{ field.label }}
                                    {% if field.field.required %}
                                        <span class="required">*</span>
                                    {% endif %}
                                        {% endif %}
                                {% endif %}
                        </td>
                        <td class="col-lg-7">
                            {% if field.label == 'Revised Effort' %}

                                <span class="col-lg-10">{{ field }}</span>

                                <span class="col-lg-2"><b><span class="label label-default form-control">PH(s)</span></b></span>
                            {% else %}
                                {% if field.label == 'Remark' %}
                                    <span class="col-lg-10 remark_span">{{ field }}</span>
                                    {% else %}
                                    <span class="col-lg-10">{{ field }}</span>
                                    {% endif %}

                                <span class="col-lg-2"></span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </table>
            </div>
        </div>
    </div>
</div>
</div>


<script>
   window.onload = function() {
        var reason = $('.reason option:selected').val();
        var textremark = $('.remark')[0].value;
        var reasondropdown = $('.reason');
        var leng = reasondropdown['0'].length;
        reasondropdown['0'].remove(leng-1);
        reasondropdown['0'].remove(leng-2);
        reasondropdown['0'].remove(leng-3);
       if($('.project_close')[0].checked){
            closingcommentsadd();
       }
       else{
           commentsadd();
       }

         $('.remark').remove();

            if(reason == 'Others'){
                reason = '<input class="form-control remark" id="id_Change Basic Information-remark" name="Change Basic Information-remark" type="text" required="true" value='+textremark+'>';
                $(".remark_span").append(reason);
                reasondropdown = $('.reason');
                reasondropdown[0].getElementsByTagName('option')[7].selected = 'selected';
            }
            else{
                reamrkinput = $('.remark')
                if(reamrkinput){
                    $('.remark').remove();
                }
            }
        }



        $('.reason').change(function(){

            var reason = $('.reason option:selected').val();
            if(reason == 'Others'){
                reason = '<input class="form-control remark" id="id_Change Basic Information-remark" name="Change Basic Information-remark" type="text" required="true">';
                $(".remark_span").append(reason);
            }
            else{
                reamrkinput = $('.remark')
                if(reamrkinput){
                    $('.remark').remove();
                }
            }

        });
$('.project_close').click(function(){
     if(this.checked){
         closingcommentsadd();
     }
     else{
         commentsadd();
     }

});
function closingcommentsadd(){
    reamrkinput = $('.remark')
                if(reamrkinput){
                    $('.remark').remove();
                }
         var reasondropdown = $('.reason');
         reasondropdown.empty()

         var spec = document.createElement('option');
         spec.text = spec.value = 'Closing sample project';
                             reasondropdown[0].add(spec, 0);
          var spec = document.createElement('option');
         spec.text = spec.value = 'Closing master project';
                             reasondropdown[0].add(spec, 0);
          var spec = document.createElement('option');
         spec.text = spec.value = 'Closing rework project';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = '...............';
                             reasondropdown[0].add(spec, 0);
         reasondropdown[0].getElementsByTagName('option')[0].selected = 'selected'
}

function commentsadd(){
    var reasondropdown = $('.reason');
         reasondropdown.empty()
         var spec = document.createElement('option');
         spec.text = spec.value = 'Others';
                             reasondropdown[0].add(spec, 0);
          var spec = document.createElement('option');
         spec.text = spec.value = 'Revising planned cost for 0 value project ';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = spec.value = 'Revising planned cost ';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = spec.value = 'Revising planned effort for 0 value project ';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = spec.value = 'Revising planned effort ';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = spec.value = 'Extending end date internal ';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = spec.value = 'Extending end date external (client side)';
                             reasondropdown[0].add(spec, 0);
         var spec = document.createElement('option');
         spec.text = '...............';
                             reasondropdown[0].add(spec, 0);
        reasondropdown[0].getElementsByTagName('option')[0].selected = 'selected';
}
</script>

{% endblock %}{% endblock %}
