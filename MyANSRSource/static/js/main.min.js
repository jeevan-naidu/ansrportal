var app=app||{},helper=helper||{};helper.range=function(e,t){for(var a=[],n=e;t>n;n+=1)a.push(n);return a},helper.forEach=function(e,t){var a,n=e.length;for(a=0;n>a;a+=1)t(e[a])},helper.sumOfArr=function(e){var t=0;return helper.forEach(e,function(e){t+=e}),t.toFixed(2)},helper.getValOrText=function(e){var t;return t="SELECT"===e.prop("tagName")||"INPUT"===e.prop("tagName")?e.val():e.text()},app.billableSetZeroList=[],app.spaceToUnderscore=function(e){var t,a,n=e.find("td *");n.each(function(){t=$(this),a=t.attr("id"),a&&/\s/.test(a)&&(a=a.replace(/\s+/g,"_"),t.attr("id",a))})},app.getEffortCurRowId=function(){var e=$(".date .input-group-addon");e.on("click",function(){var e=$(this),t=e.prev(),a=t.attr("id");app.effortRowIdNo=Number(app.getIdNo(a))+1})},app.calcCurRowChangeDate=function(e){var t=e,a=t.find("tr:eq("+app.effortRowIdNo+")"),n=a.find(".pro-start-date"),o=a.find(".pro-end-date"),r=a.find(".pro-planned-effort"),l=a.find(".pro-planned-effort-percent"),i=app.getPlannedEffort(n,o,r,l);r.val(i.plannedEffort)},app.getTaskChapter=function(e,t){if(e)$.ajax({url:"/myansrsource/gettask/"+e+"/",dataType:"json",success:function(e){e=e.data;var a,n=e.length,o="",r=$(".b-task");for(a=0;n>a;a++)o+='<option value="'+e[a].id+'"data-task-type="'+e[a].taskType+'">'+e[a].name+"</option>";t.find(".b-task").html(o),app.setActive(r,app.timesheet.actTaskList)},error:function(e){console.log("Error: "+e)}}),$.ajax({url:"/myansrsource/getchapters/"+e+"/",dataType:"json",success:function(e){e=e.data;var a,n=e.length,o="",r=$(".b-chapter");for(a=0;n>a;a++)o+='<option value="'+e[a].id+'">'+e[a].name+"</option>";t.find(".b-chapter").html(o),app.setActive(r,app.timesheet.actChaptersList)},error:function(e){console.log("Error: "+e)}});else{var a="<option value>-------</option>";t.find(".b-task").html(a),t.find(".b-chapter").html(a)}},app.getActiveTaskChapter=function(){app.timesheet={};var e,t,a,n,o,r=$(".b-task"),l=$(".b-chapter"),i=r.length;for(app.timesheet.actTaskList=[],app.timesheet.actChaptersList=[],o=0;i>o;o+=1)e=$(r[o]),t=$(l[o]),a=e.val(),n=t.val(),app.timesheet.actTaskList.push(a),app.timesheet.actChaptersList.push(n);return!1},app.setActive=function(e,t){var a,n,o=e.length;for(n=0;o>n;n+=1)a=$(e[n]),a.find("option[value="+t[n]+"]").attr("selected","selected")},app.changeProject=function(){app.billableSelectProject.on("change",function(){var e,t=$(this),a=t.closest("tr"),n=a.find(".project-unit"),o=Number(t.val());app.getTaskChapter(o,a),0!=o&&(e=app.getById(app.projectsList,"project__id",o),app.curProjectUnitShort=e.project__projectType__code,app.curProjectUnit=e.project__projectType__description,app.norms=e.project__maxProductivityUnits,n.text(app.curProjectUnitShort))})},app.getById=function(e,t,a){for(var n=0,o=e.length;o>n;n+=1)if(e[n][t]===a)return e[n]},app.firstTimeTotal=function(){function e(){var e,t,a,n,o,r,l,i,p,s,d,f,c,u,h,m,b=$(".b-task"),v=$(".total-billable-hours"),g=$(".total-idle-hours"),y=0,E=0,x=0,T=0,C=0,P=0,w=$("#timesheet-non-billable .r-total"),j=0,k=0,L=$(".total-non-billable-hours"),N=0,I=$(".timesheet-grand-total");helper.forEach(b,function(c){for(y=0,E=0,e=$(c).closest("tr"),a=e.find(".b-task option:selected").data("task-type"),n=e.find(".b-hours"),o=e.find(".b-questions"),t=n.length,r=e.find(".t-questions"),l=e.find(".t-hours"),i=e.find(".r-total-billable-hours"),p=e.find(".r-total-idle-hours"),s=0;t>s;s+=1)d=Number($(n[s]).text()),f=Number($(o[s]).text()),y+=d,E+=f;l.text(y.toFixed(2)),r.text(E.toFixed(2)),"I"===a?(C+=y,P+=E,i.val(0),p.val(y)):(x+=y,T+=E,i.val(y),p.val(0))}),helper.forEach(w,function(e){j=0,c=$(e).closest("tr"),u=c.find(".Mon-t, .Tue-t, .Wed-t, .Thu-t, .Fri-t, .Sat-t, .Sun-t"),m=c.find(".r-total"),helper.forEach(u,function(e){h=Number($(e).val()),j+=h}),m.val(j.toFixed(2)),k+=j}),N=x+C+k,console.log(N),v.text(x.toFixed(2)),g.text(C.toFixed(2)),L.text(k.toFixed(2)),I.text(N.toFixed(2)),console.log("idleHoursTotal: "+C),console.log("billableHoursTotal: "+x),app.timeSheetDayTotalHours()}e()},function(e){function t(){var t,a,n,o,r=e(".billable-select-project"),l=r.length;for(o=0;l>o;o+=1)t=e(r[o]),a=t.val(),n=t.closest("tr"),app.getTaskChapter(a,n)}app.timeSheetGrandTotal=function(){var t=Number(e(".total-billable-hours").text()),a=Number(e(".total-idle-hours").text()),n=Number(e(".total-non-billable-hours").text()),o=e(".timesheet-grand-total"),r=t+a+n;return o.text(r.toFixed(2)),r},app.timeSheetDayTotalHours=function(){function t(t,a){var n=[],o=0;helper.forEach(t,function(t){var a=helper.getValOrText(e(t));n.push(Number(a))}),o=helper.sumOfArr(n),a.text(o)}var a=e(".Mon-t"),n=e(".Tue-t"),o=e(".Wed-t"),r=e(".Thu-t"),l=e(".Fri-t"),i=e(".Sat-t"),p=e(".Sun-t"),s=e(".ts-mon-total-hr"),d=e(".ts-tue-total-hr"),f=e(".ts-wed-total-hr"),c=e(".ts-thu-total-hr"),u=e(".ts-fri-total-hr"),h=e(".ts-sat-total-hr"),m=e(".ts-sun-total-hr");t(a,s),t(n,d),t(o,f),t(r,c),t(l,u),t(i,h),t(p,m)},app.tsInputIsValid=function(e,t){return t?(t=Number(t),0>t?(console.log("Please enter the positive number"),e.addClass("alert-danger"),!1):/\./.test(t)&&!/\b\.\d\d?\b/.test(t)?(console.log("Only two decimal is allowed"),e.addClass("alert-danger"),!1):(e.removeClass("alert-danger"),!0)):(console.log("Please enter the valid number"),e.addClass("alert-danger"),!1)},app.init=function(){app.getActiveTaskChapter(),t()},e(document).ajaxStop(function(){app.firstTimeTotal()}),e(document).ready(function(){app.init();e(".popover");app.norms="0.0 / Day";var t=e("#change-team-members");t.length>0&&(app.spaceToUnderscore(t),t.dynamicForm({add:"#addForm",del:"#delete-member",calendar:!0,plannedEffortCalc:!0,changeTeamMember:!0,setEditableAll:!0,defaultValues:{setZeroList:[23],setEmptyList:null},setEnableList:[24]}));var a=e("#manage-milestones");a.length>0&&(app.spaceToUnderscore(a),a.dynamicForm({add:"#add-milestone-btn",del:"#delete-member",calendar:!0,changeMilestone:!0,isAmountTotal:!0,setEditableAll:!0,defaultValues:{setZeroList:[6,9],setEmptyList:[5]},setEnableList:[0,1,4,5,6,7,8,10]}));var n=e("#add-team-members");if(n.length>0){app.spaceToUnderscore(n),n.dynamicForm({add:"#addForm",del:"#delete-member",calendar:!0,calendarPosList:[11,16],addTeamMember:!0,plannedEffortCalc:!0,defaultValues:{setZeroList:null,setEmptyList:null}});var o,r,l,i,p,s,d,f,c=n.find("tr"),u=window.holidays.data.length;app.holidaysList=[],app.proPlannedEffortPercentItems=e(".pro-planned-effort-percent, .pro-planned-effort"),helper.clearArray(app.holidaysList);for(var h=0;u>h;h+=1)d=new Date(window.holidays.data[h].date),f=d.getDay(),0!==f&&6!==f&&app.holidaysList.push(d);c.each(function(t){t>0&&(o=e(this),r=o.find(".pro-start-date"),l=o.find(".pro-end-date"),i=o.find(".pro-planned-effort"),p=o.find(".pro-planned-effort-percent"),i.val(app.getPlannedEffort(r,l,i,p).plannedEffort))}),app.calcPlannedEffortCurRow=function(t){o=e(this),s=o.closest("tr"),r=s.find(".pro-start-date"),l=s.find(".pro-end-date"),i=s.find(".pro-planned-effort"),p=s.find(".pro-planned-effort-percent"),o.hasClass("pro-planned-effort-percent")&&i.val(app.getPlannedEffort(r,l,i,p).plannedEffort),o.hasClass("pro-planned-effort")&&p.val(app.getPlannedEffort(r,l,i,p,"percent").plannedEffortPercent)},app.proPlannedEffortPercentItems.on({keyup:app.calcPlannedEffortCurRow,click:app.calcPlannedEffortCurRow}),app.getEffortCurRowId(),e(".date").on("change",app.calcCurRowChangeDate)}var m=e("#financial-milestones");m.length>0&&(app.spaceToUnderscore(m),m.dynamicForm({add:"#add-milestone-btn",del:"#del-milestone-btn",calendar:!0,calendarPosList:[0],isAmountTotal:!0,isFinancialMilestone:!0,defaultValues:{setZeroList:[6,9],setEmptyList:[5]},setEnableList:[0,1,4,5,6,7,8,10]}));var b=e("#timesheet-billable");b.length>0&&(b.dynamicForm({add:"#timesheet-billable-add-btn",del:"#timesheet-billable-del-btn",billableTotal:!0,defaultValues:{setZeroList:app.billableSetZeroList,setEmptyList:null}}),e.ajax({url:"/myansrsource/getprojecttype",dataType:"json",success:function(e){app.projectsList=e.data},error:function(e){console.log("Error: "+e)}}),app.billableSelectProject=e(".billable-select-project"),app.changeProject());var v=e("#timesheet-non-billable");v.length>0&&v.dynamicForm({add:"#timesheet-non-billable-add-btn",del:"#timesheet-non-billable-del-btn",daysTotal:!0,nonBillable:!0,defaultValues:{setZeroList:[0,2,3,4,5,6,7,8,9],setEmptyList:null}});var g=e(".contigency-effort-input");g.length>0&&(localStorage.contigencyEffort=g.val()),g.on("keyup",function(){localStorage.contigencyEffort=e(this).val()})})}(jQuery),app.getIdNo=function(e){return e.match(/\d+/)[0]},app.getSum=function(e,t){var a,n,o,r=e.length,l=0;for(o=0;r>o;o+=1)a=$(e[o]),n=a.val(),l+=n;t.text(l)},function(){$.fn.dynamicForm=function(e){var t=$(this),a=$(e.add),n=$(e.del),o=(t.find("tr"),t.find('input[type="hidden"]:first')),r=Number(o.val());(e.addTeamMember||e.changeTeamMember)&&(o=t.parent().parent().find('input[type="hidden"]:nth-of-type(3), input[type="hidden"]:nth-of-type(4)'),r=Number(o.val())),e.isFinancialMilestone&&(o=t.parent().parent().parent().find('input[type="hidden"]:nth-of-type(3)'),r=Number(o.val())),e.changeMilestone&&(o=t.parent().parent().parent().find('input[type="hidden"]:nth-of-type(3)'),r=Number(o.val()));var l=function(){var a,n,l,i,f,c,u,h,m=$(t).find("tr").last(),b=m.find("td:first").children(":first").attr("id"),v=$(".popover");if(v.length>0&&v.hide(),b=app.getIdNo(b),b=Number(b),a=m.clone(),n=b+1,m.after(a),l=a.find("select, input, div, span"),i=l.length,r+=1,e.billableTotal||e.nonBillable){var g=a.find(".ansr-disabled"),y=a.find(".disabled");g.length>0&&g.removeClass("ansr-disabled"),y.length>0&&y.removeClass("disabled")}if($(o).attr("value",r),l.each(function(a){if(f=$(this),c=f.attr("id"),u=f.attr("name"),c&&(c=c.replace(app.getIdNo(c),n),f.attr("id",c)),u&&(u=u.replace(app.getIdNo(u),n),f.attr("name",u)),e.billableTotal||e.nonBillable){var o=t.find('input[type="hidden"]:eq(1)');$(o).attr("value",r)}if(e.defaultValues.setZeroList&&-1!==e.defaultValues.setZeroList.indexOf(a)&&(f.hasClass("project-unit")||("INPUT"===f.prop("tagName")||"SELECT"===f.prop("tagName")?f.val("0"):f.text("0"))),e.defaultValues.setEmptyList&&-1!==e.defaultValues.setEmptyList.indexOf(a)&&f.val(""),e.setEnableList&&-1!==e.setEnableList.indexOf(a)&&f.prop("disabled",!1),e.setEditable&&-1!==e.setEditable.indexOf(a)&&f.prop("readonly",!1),e.setEditableAll&&f.removeAttr("readonly"),e.calendar&&c&&c.match("Date_pickers")&&(h=$("#"+c),h.datetimepicker({pickTime:!1,language:"en-us",format:"YYYY-MM-DD"}).on("change",function(){app.calcCurRowChangeDate(t)})),(e.addTeamMember||e.changeTeamMember)&&(i-1===a&&f.prop("disabled",!1),f.hasClass("autocomplete-light-widget")&&"normal"==f.attr("data-widget-bootstrap"))){var l=f.find(".remove");"none"===l.css("display")?f.yourlabsWidget().input.bind("selectChoice",function(e,t,a){var n=$(this);n.getMemberHolidayList()}):(f.yourlabsWidget().input.bind("selectChoice",function(e,t,a){var n=$(this);n.getMemberHolidayList()}),l.trigger("click"))}if(e.plannedEffortCalc&&f.hasClass("pro-planned-effort-percent")&&f.val(100),e.billableTotal&&(app.rowChapter=$("#id_form-"+n+"-chapter"),f.hasClass("billable-select-project")&&(app.rowProject=f)),f.hasClass("set-empty")){var p=f.prop("tagName");"SELECT"===p||"INPUT"===p?f.val(""):f.text("")}if(f.hasClass("set-zero")){var s=f.prop("tagName");"SELECT"===s||"INPUT"===s?(f.attr("value",0),console.log("index: "+a+" - "+c)):f.text("0")}if(f.hasClass("remove-sel-options")){var d=f.prop("tagName");"SELECT"===d&&(f.find("option").remove().end().append("<option value>-----</option>"),console.log("index: "+a+" - "+c))}if(f.hasClass("set-q")){var m=f.prop("tagName");"SELECT"===m||"INPUT"===m?f.attr("value","Q"):f.text("Q")}console.log("index: "+a+" - "+c)}),p(),s(),d(),e.plannedEffortCalc){app.proPlannedEffortPercentItems=$(".pro-planned-effort-percent, .pro-planned-effort"),app.proPlannedEffortPercentItems.on({keyup:app.calcPlannedEffortCurRow,click:app.calcPlannedEffortCurRow}),app.getEffortCurRowId();var E=$(t).find("tr").last(),x=E.find(".pro-start-date"),T=E.find(".pro-end-date"),C=E.find(".pro-planned-effort"),P=E.find(".pro-planned-effort-percent");C.val(app.getPlannedEffort(x,T,C,P).plannedEffort)}e.billableTotal&&(app.billableSelectProject=$(".billable-select-project"),app.changeProject(),app.autoFillInit(app.rowProject,app.rowChapter))},i=function(){var e,a,n,l=t.find("tr");l.each(function(){n=$(this),e=n.find("td:last-child > :first-child"),a=e.is(":checked"),a&&(e.closest("tr").remove(),r-=1)}),$(o).attr("value",r)},p=function(){if(e.daysTotal){var a=t.find(".days"),n=function(){var e,a,n,o,r=$(this),l=r.closest("tr"),i=l.find(".days"),p=i.length,s=l.find(".total"),d=r.val(),d=Number(d),f=$(".total-non-billable-hours"),c=0,u=t.find("tr"),h=u.find(".r-total"),m=h.length,b=0;for(e=0;p>e;e+=1)a=Number($(i[e]).val()),c+=a;var v=function(){for(e=0;m>e;e+=1)n=Number($(h[e]).val()),b+=n;o=b.toFixed(2),f.text(o)};c=c.toFixed(2),s.val(c),v(),app.timeSheetGrandTotal(),app.timeSheetDayTotalHours()};a.on({keyup:n,click:n})}},s=function(){if(e.billableTotal){var a=$(".total-billable-hours"),n=$(".total-idle-hours"),o=t.find(".day-popover-button"),r=t.find(".b-task"),l=$(".row-total-view"),i='<div class="mar-bot-5"><label class="sm-fw-label project-type-popup">Questions</label> <input class="form-control small-input question-input" type="number" value="0" min="0" step="0.01"></div>';i+='<div class="mar-bot-5"><label class="sm-fw-label hours">Hours</label> <input class="form-control small-input hours-input" type="number" value="0" max="24" min="0" step="0.01"></div>',i+='<div class="mar-bot-5"><label class="sm-fw-label hours">Norm</label> <label class="small-input norm-input">0.0 / DAY</label></div>',o.popover({trigger:"click",html:!0,placement:"bottom",content:i});var p=function(e){e.preventDefault(),e.stopPropagation();var o,r=$(this),l=r.closest("tr"),i=l.find(".b-questions"),p=l.find(".b-hours"),s=l.find(".t-questions"),d=l.find(".t-hours"),f=l.find(".t-questions-hidden"),c=l.find(".t-hours-hidden"),u=i.length,h=r.find(".b-questions"),m=r.find(".b-hours"),b=r.find(".b-questions-hidden"),v=r.find(".b-hours-hidden"),g=r.next().find(".question-input"),y=r.next().find(".hours-input"),E=r.find(".project-unit"),x=r.next().find(".project-type-popup"),T=r.next().find(".norm-input"),C=h.text(),P=m.text(),w=(E.text(),l.find(".billable-select-project")),j=Number(w.val()),k=function(){$(g).val(C),$(y).val(P)},L=function(){0!=j?(o=app.getById(app.projectsList,"project__id",j),app.curProjectUnitShort=o.project__projectType__code,app.curProjectUnit=o.project__projectType__description,app.norms=o.project__maxProductivityUnits,x.text(app.curProjectUnit)):app.norms=0,T.text(app.norms+"/DAY")};L(),k();var N=function(){var e,o,r,h=0,m=0,b=l.find(".b-task option:selected").data("task-type"),v=0,g=0,y=l.find(".r-total-idle-hours"),E=l.find(".r-total-billable-hours");for(console.log("curTaskType: "+b),"I"===b?l.removeClass("billable-row").addClass("idle-row"):l.removeClass("idle-row").addClass("billable-row"),r=0;u>r;r+=1)e=Number($(i[r]).text()),o=Number($(p[r]).text()),h+=e,m+=o,"I"===b?v+=o:g+=o;s.text(h.toFixed(2)),d.text(m.toFixed(2)),f.val(h.toFixed(2)),c.val(m.toFixed(2)),y.val(v.toFixed(2)),E.val(g.toFixed(2));var x=function(){var e,o,l,i,p=t.find(".r-total-idle-hours"),s=t.find(".r-total-billable-hours"),d=p.length,f=s.length,c=p.text(),u=s.text();for(c=Number(c),u=Number(u),r=0;d>r;r+=1)e=Number($(p[r]).val()),c+=e;for(r=0;f>r;r+=1)o=Number($(s[r]).val()),u+=o;l=c,i=u,a.text(i.toFixed(2)),n.text(l.toFixed(2)),app.timeSheetGrandTotal(),app.timeSheetDayTotalHours()};x()};N();var I=function(){var e=y.val();console.log(e);var t=app.tsInputIsValid(y,y.val());t&&(h.text(g.val()),m.text(y.val()),b.val(g.val()),v.val(y.val()),N())};g.on({keyup:I,click:I},N),y.on({keyup:I,click:I},N)};o.on("shown.bs.popover",p),r.on({change:p}),o.on("show.bs.popover",function(){var e=$(".popover");e.popover("hide")}),o.on("keyup",function(e){9===e.keyCode&&$(this).trigger("click")}),$(document).on("keyup",function(e){if(27===e.keyCode){var t=$(".popover");t.popover("hide")}}),l.on("focus",function(){console.log("rTotalView trigged");var e=$(".popover");e.popover("hide")})}},d=function(){if(e.isAmountTotal){var a=$(".date-picker");1==$(a[0]).prop("readonly")&&(t.hide(),r.each(function(){$(this).attr("role","button"),$(this).attr("disabled",!0)}));var n=(t.find(".milestone-item-deliverable"),t.find(".milestone-item-amount")),o=$(".milestone-total-amount"),r=$("#add-milestone-btn, #del-milestone-btn"),l=$(".project-total-value-hidden"),i=Number(l.val()),p=function(){i!==Number(o.text())?o.hasClass("t-danger")||o.addClass("t-danger"):o.hasClass("t-danger")&&o.removeClass("t-danger")},s=function(){var e,t,a=n.length,r=0;for(e=0;a>e;e+=1)t=Number($(n[e]).val()),r+=t;r=r.toFixed(2),o.text(r),p()};s(),n.on({keyup:s,click:s})}};p(),s(),d(),e.plannedEffortCalc&&app.plannedEfforInit(t),a.on("click",l),n.on("click",i)}}(jQuery),app.workingDaysBetweenDates=function(e,t){var a=0,n=app.holidaysList.length;if(e>t)return 0;var o=864e5;e.setHours(0,0,0,1),t.setHours(23,59,59,999);var r=t-e,l=Math.ceil(r/o),i=Math.floor(l/7),l=l-2*i,p=e.getDay(),s=t.getDay();p-s>1&&(l-=2),0==p&&6!=s&&(l-=1),6==s&&0!=p&&(l-=1);for(var d=0;n>d;d+=1)app.holidaysList[d]>=e&&app.holidaysList[d]<=t&&(a+=1);return console.log("holidayCount:"+a),l-a},app.getPlannedEffort=function(e,t,a,n,o){var r=e.val(),l=r.split("-"),i=l.length,p=t.val(),s=p.split("-"),d=s.length,f=n.val(),c=a.val();f=Number(f),c=Number(c);for(var u=0;i>u;u+=1)l[u]=Number(l[u]);for(u=0;d>u;u+=1)s[u]=Number(s[u]);l=l.join(),s=s.join(),l=new Date(l),s=new Date(s);var h=8*app.workingDaysBetweenDates(l,s);if(o){var m=c/h*100;return m=Math.round(m),m=Number(m),{plannedEffortPercent:m}}var b=h*(f/100);return b=Math.round(b),{plannedEffort:b}},app.plannedEfforInit=function(e){var t,a,n,o,r,l,i,p,s=e.find("tr"),d=window.holidays.data.length;app.holidaysList=[],app.proPlannedEffortPercentItems=$(".pro-planned-effort-percent, .pro-planned-effort");for(var f=0;d>f;f+=1)i=new Date(window.holidays.data[f].date),p=i.getDay(),0!==p&&6!==p&&app.holidaysList.push(i);s.each(function(e){e>0&&(t=$(this),a=t.find(".pro-start-date"),n=t.find(".pro-end-date"),o=t.find(".pro-planned-effort"),r=t.find(".pro-planned-effort-percent"),o.val(app.getPlannedEffort(a,n,o,r).plannedEffort))}),app.calcPlannedEffortCurRow=function(e){t=$(this),l=t.closest("tr"),a=l.find(".pro-start-date"),n=l.find(".pro-end-date"),o=l.find(".pro-planned-effort"),r=l.find(".pro-planned-effort-percent"),t.hasClass("pro-planned-effort-percent")&&o.val(app.getPlannedEffort(a,n,o,r).plannedEffort),t.hasClass("pro-planned-effort")&&r.val(app.getPlannedEffort(a,n,o,r,"percent").plannedEffortPercent)},app.proPlannedEffortPercentItems.on({keyup:app.calcPlannedEffortCurRow,click:app.calcPlannedEffortCurRow}),app.getEffortCurRowId(),$(".date").on("change",function(){app.calcCurRowChangeDate(e)})},app.autoFillInit=function(e,t){if("undefined"!=typeof dismissAddAnotherPopup){var a=dismissAddAnotherPopup;dismissAddAnotherPopup=function(e,t,n){a(e,t,n),windowname_to_id(e.name)==$curElement.attr("id")&&$curElement.change()}}},$.fn.getMemberHolidayList=function(e){var t=$(this),a=t.parent().find(".value-select"),n=a.val();$.ajax({url:"/myansrsource/getholidays/"+n+"/",dataType:"json",success:function(e){e=e.data,helper.clearArray(app.holidaysList);for(var t,a,n=e.length,o=0;n>o;o+=1)t=new Date(e[o].date),a=t.getDay(),0!==a&&6!==a&&app.holidaysList.push(t);console.log(app.holidaysList)},error:function(e){console.log("ERROR:  "+e)}}),console.log("Selected Val: "+n)},helper.clearArray=function(e){for(;e.length;)e.pop()};
