
{% extends 'master.inc' %}
{% load bootstrap3 %}
{% load fontawesome %}
{% load static from staticfiles %} 


{% block ansrMenu %}
 <li><a href="/myansrsource/dashboard">
    {% fontawesome_icon 'university' large=True %}
    Dashboard
 </a></li>
 <li class="ansrLogout"><a href="{% url 'logout' %}">
    {% fontawesome_icon 'sign-out' large=True color='red' %}
    <span class="ansrLogout">Logout</span>
  </a></li>
{% endblock %}

{% block content  %}


		
<!--	fixed left section	-->
		<div class="HowItWorksContainer how_it_works_hide">
			<div class="DivRotate DivVer"><h3>How it works ?</h3></div>
			
			<div class="HowitWorksContent animated ">
				<ol>
					<li>You register a grievance</li>
					<li>Accordingly admin takes action</li>
					<li>If you are satisfied, you close. If not you escalate</li>
					<li>If escalated, admin forwards it to concerned department authorities</li>
					<li>The authorities takes action</li>
					<li>You close the grievance</li>
				</ol>
			</div>
		</div>
		
		
		
		
<!-- Add grievance popup-->
<div class="modal fade" id="add_grievance_popup" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				
				<div class="modal-header">
					 
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						<span class="glyphicon glyphicon glyphicon-remove"></span>
					</button>
					<h4 class="modal-title" id="myModalLabel">
						<h3 class="text-center">Register Grievance</h3>
					</h4>
				</div>
				<div class="modal-body" id="modal_body">
					...
				</div>
				
			</div>
		</div>
</div>
<!-- End add grievance popup -->

<h1 class="text-center">Grievances</h1>

{% if objects_list %}
					<h5 class="text-center">(Below is the list of grievances that you registered in past)</h5>
{% endif %}



<h4 class="text-right margin-right-15" >
		  <a class="launchModalForm" href="#add_grievance_popup" role="button" class="btn" data-toggle="modal"><button type="button" class="btn btn-danger">Register a grievance</button></a>
    <!--<a style="color:#fff" href="{% url 'add_grievance' %}"><button type="button" class="btn btn-info"> Click here to register your grievance</button></a>-->
</h4>



<div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<table class="table table-hover table-striped">
				<thead>
					<tr class="TbHead">
						<th class="text-center">
							Grievance ID
						</th>
						<th class="text-center">
							Grievance / Feedback / Actions
						</th>
						<th class="text-center">
							Catagory
						</th>
						<th class="text-center">
							Created Date
						</th>
						
						<th class="text-center">Status</th>
					</tr>
				</thead>
				
				<tbody id="listTableBody">
					{% if objects_list %}
						{% for object in objects_list %}
							
						<tr class="warning" style="border-bottom: 1px solid #DBD9D9">
							<td style="width: 15%">
								<p>{{object.grievance_id}}</p>
								<p>{% if object.escalate %}<p><label type="label" class="label label-warning">Escalated</button></p> {% endif %}</p>
								
								
								{% if object.satisfaction_level == 'satisfied' or object.satisfaction_level = 'not_sure'%}
									<div>
										<label type="label" class="label label-success ">{{object.get_satisfaction_level_display}}</label>
									</div>
									
								{% endif %}
								
								{% if object.satisfaction_level == 'dissatisfied' or object.satisfaction_level = 'very_dissatisfied'%}
									<div>
										<label type="label" class="label label-danger ">{{object.get_satisfaction_level_display}}</label>
									</div>
								{% endif %}
								
							</td>
							
							
							
							<td style="width: 50%">
								<!--	Grievance details - grievance, action taken, user actions, HR closure message -->
									{% include 'grievance_details.html' %}
									
							</td>
							
							<td style="width: 15%">
								<p class="text-center">{{object.catagory}}</p>
							</td>
	
							<td style="width: 15%">
								{{object.created_date}}
							</td>
							<td>
							  {% if object.active %}
								 <p class="text-center"> 
									<span id="status_{{object.grievance_id}}" > <i class="fa fa-unlock fa-lg" style="color:#66B778;"></i> </span>
								 </p>
							  {% else %}
								  <p class="text-center">
									<span> <i class="fa fa-lock fa-lg" style="color:#d9534f;"></i> </i> </span>
								  </p>
								  
								  
							  {% endif %}
							</td>
							
						</tr>
						
						{% endfor %}
					
						
					{% endif %}
				</tbody>
				
			
			
			</table>
		</div>
	</div>
</div>

{% if not objects_list %}
							<div>
								<h4 class="text-center" id="no_grievances_alert">No grievances found..</h4><br><br>
						</div>
{% endif %}
<h5 class="text-center">There are some things that remain unnoticed. If you don't tell us, we will never know. So, please mention it here. Your grievance will be handled with utmost sincerity and honesty.</h5>

{% endblock  %}




{% block page_specific_JS %}
		<script src='/static/js/jquery.ui.widget.js' type="text/javascript"></script>
		<script src='/static/js/bootstrap-filestyle.min.js' type="text/javascript"></script>
		<!--<script src='/static/js/grievances_user.js' type="text/javascript"></script>-->
		<script src='{% static 'js/grievances_user.js' %}' type="text/javascript"></script>
	
{% endblock %}




