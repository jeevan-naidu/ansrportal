{% extends 'master.inc' %}
{% load bootstrap3 %}
{% load fontawesome %}
{% load static from staticfiles %}
{% load grievances_template_tags %}
{% block ansrMenu %}
 <li><a href="/myansrsource/dashboard">
    {% fontawesome_icon 'university' large=True %}
    Dashboard
 </a></li>
 <li class="ansrLogout"><a href="{% url 'logout' %}">
    {% fontawesome_icon 'sign-out' large=True color='red' %}
    <span class="ansrLogout">Logout</span>
  </a></li>
{% endblock %}

{% block siteTitle %}myansrsource : Leave{% endblock %}

{% block content  %}

<h2 class="text-center">Upload leave data</h2>

<div class="row">
	<div class="col-md-2"></div>
	<div class="col-md-8">
		<form action="/leave/upload-leave-balance/" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			
			{% if errors_list %}
				<h4>Below errors were found in csv:</h4>
				{% for error in errors_list %}
					<!--<h5 style="color: red;">Exception Type : {{exception_type}}<br>
					Exception : {{exception}}<br>
					Line No : {{error_at_line}}
					</h5>-->
					<h5 style="color: red;">{{error}}</h5>
				{% endfor %}

			{% endif %}
			{% for field in form %}
				<div class="fieldWrapper">
					
					{{ field.label_tag }} {% if field.field.required %}<span style="color:red;">*</span>{% endif %} {{ field }}
					<span style="color:red;">{{ field.errors }}</span>
					{% if field.help_text %}
					<p class="help">{{ field.help_text|safe }}</p>
					{% endif %}
				</div>
			{% endfor %}
			<br>
			<button type="submit" class="btn btn-danger">Upload</button>
		</form>
		
	</div>
	<div class="col-md-2"></div>
</div>

{% endblock  %}

{% block page_specific_JS %}
		<script src='/static/js/jquery.ui.widget.js' type="text/javascript"></script>
		<script src='/static/js/bootstrap-filestyle.min.js' type="text/javascript"></script>
		
		<script>
			$(document).ready(function(){
				
					// File type validation
				var fileExtension = ['csv'];
				$('.filestyle').bind('change', function() {
				
					if ($.inArray($(this).val().split('.').pop().toLowerCase(), fileExtension) == -1) {
						alert("Allowed file types : "+fileExtension.join(', '));
						$(this).filestyle('clear');
						}
				
					
				});
				
				});
		</script>

{% endblock %}




