{% extends 'projectMaster.inc' %}

{% block content %}
<ul class="form-steps clearfix">
    <li class="form-step one-sixth">
        <span class="form-step-bor"></span>
        <span class="form-step-no">1</span>
        <label class="form-step-label">Define Project</label>
    </li>
    <li class="form-step one-sixth">
        <span class="form-step-bor"></span>
        <span class="form-step-no">2</span>
        <label class="form-step-label">Basic Information</label>
    </li>
    <li class="form-step one-sixth">
        <span class="form-step-bor"></span>
        <span class="form-step-no">3</span>
        <label class="form-step-label">Define Team</label>
    </li>
    <li class="form-step one-sixth">
        <span class="form-step-bor"></span>
        <span class="form-step-no">4</span>
        <label class="form-step-label">Financial Milestones</label>
    </li>
    <li class="form-step one-sixth active">
        <span class="form-step-bor"></span>
        <span class="form-step-no">5</span>
        <label class="form-step-label">Validate</label>
    </li>
    <li class="form-step one-sixth">
        <span class="form-step-bor"></span>
        <span class="form-step-no">6</span>
        <label class="form-step-label">Complete!</label>
    </li>
</ul>
<div class="col-xs-12 col-md-12 col-lg-12  jumbotron shadow">
<legend><b>Summary</b></legend>
<form id="snapshot" name="snapshot" method="POST" action="save">
{% csrf_token %}
<div class="panel panel-default">
	<div class="panel-heading overflowHidden">
		<b>
			<span class="col-lg-6">Define Project</span>
			<span class="col-lg-6 text-right">Planned Revenue Recognition : {{ revenueRec }}</span>
		</b>
	</div>
	<div class="panel-body">
	<table class="table table-condensed">
		<thead>
				<th>Type</th>
				<th>Business Unit</th>
				<th>Name</th>
				<th>Customer</th>
				<th>Planned Effort</th>
				<th>Contigency Effort</th>
				<th>Book</th>
				<th>Chapters</th>
				<th>Start Date</th>
				<th>End Date</th>
				<th>Total Value</th>
		</thead>
		<tbody>
		<tr>
			<td>{{ basicInfo.projectType }}</td>
			<td>{{ basicInfo.bu }}</td>
			<td>{{ basicInfo.name }}</td>
			<td>{{ basicInfo.customer }}</td>
			<td>{{ basicInfo.plannedEffort }}</td>
			<td>{{ basicInfo.contingencyEffort }}</td>
			<td>{{ basicInfo.book }}</td>
			<td>
				{% for eachChapter in basicInfo.chapters %}
					{% if forloop.last %}
						{{ eachChapter }}
					{% else %}
						{{ eachChapter }},
					{% endif %}
				{% endfor %}
			</td>
			<td>{{ basicInfo.startDate }}</td>
			<td>{{ basicInfo.endDate }}</td>
			<td>{{ basicInfo.totalValue }}</td>
			{% for rec, value in basicInfo.iteritems %}
				<input type="hidden" name="{{ rec }}" value="{{ value }}">
			{% endfor %}
				<input type="hidden" name="chapters" value="{{ chapterId }}">
				<input type="hidden" name="book" value="{{ basicInfo.book.id }}">
				<input type="hidden" name="bu" value="{{ basicInfo.bu.id }}">
				<input type="hidden" name="customer" value="{{ basicInfo.customer.id }}">
				<input type="hidden" name="projectType" value="{{ basicInfo.projectType.id }}">
		</tr>
		</tbody>
	</table>
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading overflowHidden"><b><span class="col-lg-6">Project Basic Information</span></b></div>
	<div class="panel-body">
	<table class="table table-condensed">
		<thead>
				<th>Norms</th>
				<th>Is it an internal Project?</th>
				<th>Is this a new project?</th>
				<th>Is this contract signed?</th>
		</thead>
		<tbody>
		<tr>
			<td>{{ flagData.maxProductivityUnits }}</td>
			<td>
				{% if flagData.internal == True  %}
					Yes
				{% else %}
					No
				{% endif %}
			</td>
			<td>
				{% if flagData.currentProject == True %}
					Yes
				{% else %}
					No
				{% endif %}
			</td>
			<td>
				{% if flagData.signed == True %}
					Yes
				{% else %}
					No
				{% endif %}
			</td>
			{% for rec, value in flagData.iteritems %}
				<input type="hidden" name="{{ rec }}" value="{{ value }}">
			{% endfor %}
		</tr>
		</tbody>
	</table>
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading overflowHidden">
		<b>
			<span class="col-lg-6">Team Member(s)</span>
			<span class="col-lg-6 text-right">Total Effort : {{ effortTotal }}</span>
		</b>
	</div>
<div class="panel-body">
	<table class="table table-condensed">
		<thead>
			<th>Member</th>
			<th>Role</th>
			<th>Start Date</th>
			<th>End Date</th>
			<th>Planned Effort</th>
			<th>%</th>
		</thead>
				<input type="hidden" name="teamMemberTotal" value="{{ teamMember|length }}">
		{% for teamData in teamMember %}
		<tr>
			{% with counter=forloop.counter|stringformat:"s" %}
				<td>
					{% with memberId="member-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if memberId == rec %}
								{{ value }}
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
				<td>
					{% with roleId="role-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if roleId == rec %}
								{{ value }}
				<input type="hidden" name="{{ rec }}" value="{{ value.id }}">
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
				<td>
					{% with startDateId="startDate-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if startDateId == rec %}
								{{ value }}
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
				<td>
					{% with endDateId="endDate-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if endDateId == rec %}
								{{ value }}
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
				<td>
					{% with effortId="plannedEffort-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if effortId == rec %}
								{{ value }}
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
				<td>
					{% with effortId="rate-"|add:counter %}
						{% for rec, value in teamData.iteritems %}
							{% if effortId == rec %}
								{{ value }}
							{% endif %}
						{% endfor %}
					{% endwith %}
				</td>
			{% endwith %}
			{% for rec, value in teamData.iteritems %}
			{% if 'role' not in rec %}
				<input type="hidden" name="{{ rec }}" value="{{ value }}">
			{% endif %}
			{% endfor %}
		</tr>
		{% endfor %}
	</table>
</div>
</div>
{% if flagData.internal == False %} 
<div class="panel panel-default">
	<div class="panel-heading overflowHidden"><b><span class="col-lg-6">Milestone(s)</span></b></div>
<div class="panel-body">
	<table class="table table-condensed">
		<thead>
			<th>Description</th>
			<th>Deadline</th>
			<th>Amount</th>
			<th>Financial?</th>
		</thead>
				<input type="hidden" name="milestoneTotal" value="{{ milestone|length }}">
		{% for milestoneData in milestone %}
		<tr>
			{% with counter=forloop.counter|stringformat:"s" %}
			<td>
				{% with descriptionId="description-"|add:counter %}
					{% for rec, value in milestoneData.iteritems %}
						{% if descriptionId == rec %}
							{{ value }}
						{% endif %}
					{% endfor %}
				{% endwith %}
			</td>
			<td>
				{% with deadlineId="milestoneDate-"|add:counter %}
					{% for rec, value in milestoneData.iteritems %}
						{% if deadlineId == rec %}
							{{ value }}
						{% endif %}
					{% endfor %}
				{% endwith %}
			</td>
			<td>
				{% with amountid="amount-"|add:counter %}
					{% for rec, value in milestoneData.iteritems %}
						{% if amountid == rec %}
							{{ value }}
						{% endif %}
					{% endfor %}
				{% endwith %}
			</td>
			<td>
				{% with financialid="financial-"|add:counter %}
					{% for rec, value in milestoneData.iteritems %}
						{% if financialid == rec %}
							{{ value }}
						{% endif %}
					{% endfor %}
				{% endwith %}
			</td>
			{% endwith %}
			{% for rec, value in milestoneData.iteritems %}
				<input type="hidden" name="{{ rec }}" value="{{ value }}">
			{% endfor %}
		</tr>
		{% endfor %}
	</table>
</div>
</div>
{% endif %}
<a href="cancel" class="btn btn-danger">
        <span class="glyphicon glyphicon-remove"></span>
	<b>Cancel Project</b>
</a>
<button type="submit" value="submit" class="btn btn-success pull-right">
        <span class="glyphicon glyphicon-ok"></span>
	<b>Create Project</b>
</button>
</form>
</div>
{% endblock %}
